!DOCTYPE html
html lang=ar dir=rtl
head
  meta charset=UTF-8
  meta name=viewport content=width=device-width, initial-scale=1.0
  titleØªÙ‚ÙŠÙŠÙ… Ø´ÙÙ‡ÙŠ - ÙƒÙŠÙ…ÙŠØ§Ø¡title
  link href=httpsfonts.googleapis.comcss2family=Tajawalwght@400;500;700&display=swap rel=stylesheet
  style
    body { font-family 'Tajawal', sans-serif; background #f5f5f5; margin 0; padding 0; min-height 100vh; display flex; }
    .sidebar { width 280px; background white; box-shadow 4px 0 20px rgba(0,0,0,0.1); position fixed; top 0; bottom 0; right 0; z-index 100; }
    .sidebar-header { background #D32F2F; color white; padding 30px 20px; text-align center; font-size 22px; font-weight 700; }
    .menu-item { display flex; align-items center; padding 18px 30px; color #555; text-decoration none; font-size 18px; transition all 0.3s; }
    .menu-itemhover { background #f0f0f0; color #D32F2F; }
    .main-content { flex 1; padding 40px; margin-right 280px; display flex; flex-direction column; align-items center; justify-content center; }
    .title { font-size 28px; color #D32F2F; margin-bottom 30px; }
    button { padding 18px 36px; font-size 20px; background #D32F2F; color white; border none; border-radius 16px; cursor pointer; margin 10px; }
    buttonhover { background #b71c1c; }
    #result { margin-top 40px; font-size 24px; text-align center; padding 20px; border-radius 16px; min-height 100px; }
    .good { background #e8f5e9; color green; }
    .average { background #fff3e0; color orange; }
    .poor { background #ffebee; color red; }
    @media (max-width 768px) { .sidebar { width 100%; height auto; position relative; } .main-content { margin-right 0; } }
  style
head
body
  div class=sidebar
    div class=sidebar-headerğŸ“š ÙƒÙŠÙ…ÙŠØ§Ø¡ ØªÙØ§Ø¹Ù„ÙŠØ©div
    div class=sidebar-menu
      a href=index.html class=menu-itemspan class=menu-iconğŸ‘¨â€ğŸ«span Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯Ø±Ø³a
      a href=student.html class=menu-itemspan class=menu-iconğŸ‘¨â€ğŸ“span ØµÙØ­Ø© Ø§Ù„Ø·Ø§Ù„Ø¨a
      a href=stats.html class=menu-itemspan class=menu-iconğŸ“Šspan Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øªa
    div
  div

  div class=main-content
    h2 class=title id=lessonTitleh2
    p style=font-size20px;Ù„Ø®Øµ Ø§Ù„Ø¯Ø±Ø³ Ø¨ØµÙˆØªÙƒ Ø¯Ù„ÙˆÙ‚ØªÙŠ...p
    button onclick=startListening()ğŸ¤ Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªÙ„Ø®ÙŠØµbutton
    button onclick=readReference()ğŸ”Š Ø§Ø³Ù…Ø¹ Ø§Ù„ØªÙ„Ø®ÙŠØµ Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠbutton
    div id=resultdiv
  div

  script
    const lessons = JSON.parse(localStorage.getItem('chemLessons'))  [];
    const index = localStorage.getItem('currentLessonIndex');
    const lesson = lessons[index];
    document.getElementById('lessonTitle').textContent = lesson.name  'Ø¯Ø±Ø³ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';

    const recognition = new (window.SpeechRecognition  window.webkitSpeechRecognition)();
    recognition.lang = 'ar-SA';
    recognition.continuous = false;

    function jaccardSimilarity(a, b) {
      const setA = new Set(a.toLowerCase().split(' '));
      const setB = new Set(b.toLowerCase().split(' '));
      let intersection = 0;
      for (let word of setA) if (setB.has(word)) intersection++;
      const union = setA.size + setB.size - intersection;
      return union === 0  0  Math.round((intersection  union)  100);
    }

    function getGrade(score) {
      if (score = 80) return { text 'Ù…Ù…ØªØ§Ø² â­', class 'good' };
      if (score = 60) return { text 'Ø¬ÙŠØ¯ ğŸ‘', class 'average' };
      return { text 'ÙŠØ­ØªØ§Ø¬ ØªØ­Ø³ÙŠÙ† âŒ', class 'poor' };
    }

    function startListening() {
      document.getElementById('result').textContent = 'ğŸ™ï¸ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹...';
      recognition.start();
      recognition.onresult = (e) = {
        const summary = e.results[0][0].transcript;
        const score = jaccardSimilarity(summary, lesson.reference);
        const grade = getGrade(score);

        document.getElementById('result').innerHTML = `
          ØªÙ„Ø®ÙŠØµÙƒ strong${summary}strongbrbr
          Ù†Ø³Ø¨Ø© Ø§Ù„ØªØ´Ø§Ø¨Ù‡ strong${score}%strongbr
          Ø§Ù„ØªÙ‚ÙŠÙŠÙ… strong${grade.text}strong
        `;
        document.getElementById('result').className = grade.class;

         Ø­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø©
        lessons[index].scores.push(score);
        localStorage.setItem('chemLessons', JSON.stringify(lessons));
      };
      recognition.onerror = () = document.getElementById('result').textContent = 'âŒ Ø®Ø·Ø£ØŒ Ø¬Ø±Ø¨ ØªØ§Ù†ÙŠ';
    }

    function readReference() {
      const utter = new SpeechSynthesisUtterance(lesson.reference);
      utter.lang = 'ar-SA';
      speechSynthesis.speak(utter);
    }
  script
body
html